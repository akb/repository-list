#!/usr/bin/env bash

BASEPATH=$(cd "$(dirname "${BASH_SOURCE[0]}")"/.. && pwd)

DESTINATION_PATH=$BASEPATH/build/public/vendor.js

$BASEPATH/node_modules/browserify/bin/cmd.js \
  --outfile $DESTINATION_PATH \
  --verbose \
  --debug \
  --require lru-cache \
  --require react-dom \
  --require react

# NOTE: This uses BSD stat syntax and will likely not work under Linux
size=$(stat -f "%z" ${DESTINATION_PATH})

echo "wrote $size bytes to $DESTINATION_PATH"
